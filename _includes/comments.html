<div class="comments">
{% if include.slug %}{% assign slug = include.slug %}{% else %}{% assign slug = page.slug %}{% endif %}
{% if site.data.comments[slug] %}
  {% assign comments = site.data.comments[slug] | sort %}
  <h3>{{ comments | size }} comment{% if comments.size > 1 %}s{% endif %} for <em>{{ page.title }}</em></h3>
  {% for comment in comments %}
  {% unless comment[1].replyto %}
    {% unless forloop.first %}{% include comment-reply-to.html replyto=prevcomment %}</article>{% endunless %}
    <article id="comment-{{ comment[1].date }}" class="comment" style="overflow: auto;" itemprop="comment" itemscope itemtype="http://schema.org/Comment">{% endunless %}
    {% if comment[1].replyto %}<div>{% endif %}
      <img src="{% if comment[1].email == "e591f3aa7c8cbd7dd9e3389958949ed3" %}https://avatars.githubusercontent.com/u/12754677?v=3{% else %}https://www.gravatar.com/avatar/{{ comment[1].email }}{% endif %}" style="height: 80px; width: 80px; margin-right: 10px; margin: 10px 10px 0px 0px; display: inline-block; vertical-align: top;"/>
	  <div style="display: inline-block; width: 60%; vertical-align: top;">
      <h3 class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        {% if comment[1].url %}{% unless comment[1].url == blank %}<a rel="nofollow" href="{{ comment[1].url }}">{% endunless %}{% endif %}
        <span itemprop="name">{{ comment[1].name }}</span>
        {% if comment[1].url %}{% unless comment[1].url == blank %}</a>{% endunless %}{% endif %}
      </h3>
    <div class="comment-date">
      <a href="#comment-{{ comment[1].date }}" itemprop="url">
      <time datetime="{{ comment[1].date | date_to_xmlschema }}" itemprop="datePublished">{{ comment[1].date | date: '%B %d, %Y %r' }}</time>
      </a>
    </div>
    <div class="comment-body" itemprop="text">{{ comment[1].message | markdownify }}</div>
    {% if comment[1].replyto %}</div></div>{% endif %}
  {% if forloop.last %}{% include comment-reply-to.html replyto=comment %}</div></article>{% endif %}
  {% assign prevcomment = comment %}
  {% endfor %}
{% endif %}

<h3 id="reply-title" class="comment-reply-title">Leave a Reply</h3>
<form id="post-new-comment" class="new-comment" method="post" action="https://api.staticman.net/v2/entry/hendrixjoseph/hendrixjoseph.github.io/master/comments">
  <input name="options[redirect]" type="hidden" value="{{ site.url }}{{ page.url }}">
  <input name="options[slug]" type="hidden" value="{{ slug }}">
  <label class="comment-body">Comment (required)<textarea name="fields[message]" required="required" cols="45" rows="8" maxlength="65525" aria-required="true"></textarea></label>
  <label class="comment-author">Name (required)<input name="fields[name]" id="name" required="required" aria-required="true" type="text"></label>
  <label class="comment-email">Email (required, always hashed, never used nor published)<input name="fields[email]" id="email" required="required" aria-required="true" type="email"></label>
  <label class="comment-url">Website (optional)<input name="fields[url]" id="url" type="url"></label>  
  <button type="submit">Post comment</button>
  <em>Note that comments won't appear until approved.</em>
</form>
</div>
