<div class="comments">
{% if site.data.comments[page.slug] %}
  {% assign comments = site.data.comments[page.slug] | sort %}
  <h3>{{ comments | size }} comments for {{ page.title }}</h3>
  {% for comment in comments %}
  <article id="comment-{{ comment[1].date }}" class="comment" itemprop="comment" itemscope itemtype="http://schema.org/Comment">
    <h3 class="comment-author" itemprop="author" itemscope itemtype="http://schema.org/Person">
      {% if comment[1].url %}<a rel="nofollow" href="{{ comment[1].url }}">{% endif %}
      <span itemprop="name">{{ comment[1].name }}</span>
      {% if comment[1].url %}</a>{% endif %}
    </h3>
    <div class="comment-date">
      <a href="#comment-{{ comment[1].date }}" itemprop="url">
      <time datetime="{{ comment[1].date | date_to_xmlschema }}" itemprop="datePublished">{{ comment[1].date | date: '%B %d, %Y %r' }}</time>
      </a>
    </div>
    <div class="comment-body" itemprop="text"><p>{{ comment[1].message }}</p></div>
  </article>
  {% endfor %}
{% endif %}

<h3>Leave a Reply</h3>
<form id="post-new-comment" method="post" action="https://api.staticman.net/v2/entry/hendrixjoseph/hendrixjoseph.github.io/master/comments">
  <input name="options[redirect]" type="hidden" value="{{ site.url }}{{ page.url }}">
  <input name="options[slug]" type="hidden" value="{% if include.slug %}{{ include.slug }}{% else %}{{ page.slug }}{% endif %}">
  <label class="comment-body">Comment (required)<textarea name="fields[message]" required="required" aria-required="true"></textarea></label>  
  <label class="comment-author">Name (required)<input name="fields[name]" required="required" aria-required="true" type="text"></label>
  <label class="comment-url">Email (required)<input name="fields[email]" required="required" aria-required="true" type="email"></label>
  <label class="comment-email">Website (optional)<input name="fields[url]" type="url"></label>  
  <button type="submit">Post comment</button>
  <em>Note that comments won't appear until approved.</em>
</form>
</div>
