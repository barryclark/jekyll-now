{% capture cache %}

{% if page.mathjax %}{% assign mathjax = true %}{% endif %}
{% if page.jquery %}{% assign jquery = true %}{% endif %}
{% assign javascripts = "" | split: "" %}
{% assign csses = "" | split: "" %}

{% if page.permalink contains '/tags/' %}
	{% assign posts=site.tags[page.title] %}
{% else %}
	{% assign posts=paginator.posts %}
{% endif %}

{% if page.javascript %}{% assign javascripts = javascripts | push: page.javascript %}{% endif %}

{% for javascript in page.javascripts %}
	{% unless javascripts contains javascript %}
		{% assign javascripts = javascripts | push: javascript %}
	{% endunless %}
{% endfor %}

{% if page.css %}{% assign csses = csses | push: page.css %}{% endif %}

{% for css in page.csses %}
	{% unless csses contains css %}{% assign csses = csses | push: css %}{% endunless %}
{% endfor %}

{% unless page.isPost %}
	{% for post in posts %}
		{% if post.mathjax %}{% assign mathjax = true %}{% endif %}
		{% if post.jquery %}{% assign jquery = true %}{% endif %}
	
		{% unless csses contains post.css %}
			{% assign csses = csses | push: post.css %}
		{% endunless %}
		
		{% for css in post.csses %}
			{% unless csses contains css %}{% assign csses = csses | push: css %}{% endunless %}
		{% endfor %}
		
		{% unless javascripts contains post.javascript %}
			{% assign javascripts = javascripts | push: post.javascript %}
		{% endunless %}
		
		{% for javascript in post.javascripts %}
			{% unless javascripts contains javascript %}{% assign javascripts = javascripts | push: javascript %}{% endunless %}
		{% endfor %}
	{% endfor %}
{% endunless %}
{% endcapture %}{% assign jbcache = nil %}
<!DOCTYPE html>
<html lang="en-us">
	<head>
		<title>{% if page.title %}{{ page.title }} – {% endif %}{{ site.name }} – {{ site.description }}</title>
		
		{% include meta.html %}
		{% include opengraph.html %}
		{% include twittercard.html %}
		
		{% if mathjax %}<script type="text/x-mathjax-config">
	    	MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
	  	</script>
	  	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>{% endif %}

		{% if jquery %}<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>{% endif %}
		{% for javascript in javascripts %}{% unless javascript == blank %}<script src="{{ javascript }}"></script>{% endunless %}{% endfor %}
		
		<!--[if lt IE 9]>
		  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		
		{% for css in csses %}{% unless css == blank %}<link rel="stylesheet" type="text/css" href="{{ css }}" />{% endunless %}{% endfor %}
		<link rel="stylesheet" type="text/css" href="/style.css" />
		<link rel="alternate" type="application/rss+xml" title="{{ site.name }} - {{ site.description }}" href="{{ site.baseurl }}/feed.xml" />
		<link href="/favicon.ico?" rel="shortcut icon" type="image/x-icon" />
	</head>
	{% if page.isPost %}<body itemscope itemtype="http://schema.org/BlogPosting">{% elsif page.url == "/index.html" or page.url contains "/tags/" or page.url contains "/page" %}<body itemscope itemtype="http://schema.org/Blog">{% else %}<body>{% endif %}
    	{% include schema.html %}  
	    {% include facebook.html %}	    
	    <div class="wrapper-masthead">
  		<div class="container">
	        	<header class="masthead clearfix">
	          		<a href="{{ site.baseurl }}/" class="site-avatar"><img src="https://avatars.githubusercontent.com/u/12754677?v=3" alt="Joe's GitHub Profile Picture" /></a>
	
		          	<div class="site-info">
			            <h1 class="site-name"><a href="{{ site.baseurl }}/">{{ site.name }}</a></h1>
			            <p class="site-description">{{ site.description }}</p>
		          	</div>
	
	          		<nav>
	            	{% for navlink in site.navlinks %}<a href="{{ navlink.url }}">{{ navlink.text }}</a>{% if forloop.last %}{% else %}|{% endif %}{% endfor %}
	          		</nav>
	        	</header>
	        	{% include google/adsense.html %}
	        	{% include google/search.html %}
	      	</div>
		</div>
		
	    <div id="main" role="main" class="container">
	  		{{ content }}
	    </div>
	
	    {% include footer.html %}
	    {% include viglink.html %}
	    {% include google/analytics.html %}
	</body>
</html>
